# MediaMTX Configuration for School Announcements
# Simplified for compatibility with v1.9.x

# Logging
logLevel: info
logDestinations: [stdout]

# API server
api: yes
apiAddress: :9997

# Metrics
metrics: yes
metricsAddress: :9998

# RTMP server (for OBS compatibility)
rtmp: yes
rtmpAddress: :1935

# HLS server (fallback)
hls: yes
hlsAddress: :8888
hlsVariant: lowLatency
hlsSegmentCount: 7
hlsSegmentDuration: 1s
hlsPartDuration: 200ms

# WebRTC server (main output for displays)
webrtc: yes
webrtcAddress: :8889
webrtcLocalUDPAddress: :8189
webrtcLocalTCPAddress: :8189
webrtcIPsFromInterfaces: yes
webrtcAllowOrigin: "*"

# Paths (streaming endpoints)
paths:
  # Main announcements stream
  announcements:
    source: publisher

  # Alias for "live" path
  live:
    source: publisher

  # Allow any other stream path
  all_others:
    source: publisher
